{"ast":null,"code":"var _class;\nimport { HttpHeaders } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../helpers/helpers\";\nexport class BaseService {\n  constructor(helper) {\n    this.helper = helper;\n  }\n  get pathBase() {\n    return `${this._pathBase}/${this.controllerName}/`;\n  }\n  extractData(res) {\n    const body = res.json();\n    return body || {};\n  }\n  handleError(error) {\n    let errMsg;\n    if (error instanceof Response) {\n      const body = error.json() || '';\n      const err = body || JSON.stringify(body);\n      errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.log(errMsg);\n    return throwError(errMsg);\n  }\n  header() {\n    let header = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    if (this.helper.isAuthenticated()) header = header.append('Authorization', `Bearer ${this.helper.getToken()}`);\n    return {\n      headers: header\n    };\n  }\n  setToken(data) {\n    this.helper.setToken(data);\n  }\n  failToken(error) {\n    this.helper.failToken();\n    return this.handleError(error);\n  }\n}\n_class = BaseService;\n_class.ɵfac = function BaseService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.Helpers));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac\n});","map":{"version":3,"names":["HttpHeaders","throwError","BaseService","constructor","helper","pathBase","_pathBase","controllerName","extractData","res","body","json","handleError","error","errMsg","Response","err","JSON","stringify","status","statusText","message","toString","console","log","header","isAuthenticated","append","getToken","headers","setToken","data","failToken","i0","ɵɵinject","i1","Helpers","factory","ɵfac"],"sources":["D:\\Kurulko\\My projects 2\\Notes\\angularapp\\src\\app\\services\\base.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { throwError } from 'rxjs'\r\nimport { Helpers } from '../helpers/helpers';\r\n\r\n@Injectable()\r\nexport abstract class BaseService {\r\n    private readonly _pathBase: \"api\";\r\n    abstract controllerName:string;\r\n\r\n    constructor(private helper: Helpers) {}\r\n\r\n    public get pathBase(): string{\r\n        return `${this._pathBase}/${this.controllerName}/`;\r\n    }\r\n\r\n    public extractData(res: Response){\r\n        const body = res.json();\r\n        return body || {};\r\n    }\r\n\r\n    public handleError(error: Response | any){\r\n        let errMsg: string;\r\n        if(error instanceof Response){\r\n            const body = error.json() || '';\r\n            const err = body || JSON.stringify(body);\r\n            errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\r\n        } else {\r\n            errMsg = error.message ? error.message : error.toString();\r\n        }\r\n        console.log(errMsg);\r\n        return throwError(errMsg);\r\n    }\r\n\r\n    public header(){\r\n        let header = new HttpHeaders({'Content-Type': 'application/json'});\r\n        if(this.helper.isAuthenticated())\r\n            header  = header.append('Authorization', `Bearer ${this.helper.getToken()}`);\r\n        return {headers: header};\r\n    }\r\n\r\n    public setToken(data:any){\r\n        this.helper.setToken(data);\r\n    }\r\n\r\n    public failToken(error: Response | any){\r\n        this.helper.failToken();\r\n        return this.handleError(error);\r\n    }\r\n}"],"mappings":";AACA,SAASA,WAAW,QAAQ,sBAAsB;AAClD,SAASC,UAAU,QAAQ,MAAM;;;AAIjC,OAAM,MAAgBC,WAAW;EAI7BC,YAAoBC,MAAe;IAAf,KAAAA,MAAM,GAANA,MAAM;EAAY;EAEtC,IAAWC,QAAQA,CAAA;IACf,OAAO,GAAG,IAAI,CAACC,SAAS,IAAI,IAAI,CAACC,cAAc,GAAG;EACtD;EAEOC,WAAWA,CAACC,GAAa;IAC5B,MAAMC,IAAI,GAAGD,GAAG,CAACE,IAAI,EAAE;IACvB,OAAOD,IAAI,IAAI,EAAE;EACrB;EAEOE,WAAWA,CAACC,KAAqB;IACpC,IAAIC,MAAc;IAClB,IAAGD,KAAK,YAAYE,QAAQ,EAAC;MACzB,MAAML,IAAI,GAAGG,KAAK,CAACF,IAAI,EAAE,IAAI,EAAE;MAC/B,MAAMK,GAAG,GAAGN,IAAI,IAAIO,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC;MACxCI,MAAM,GAAG,GAAGD,KAAK,CAACM,MAAM,MAAMN,KAAK,CAACO,UAAU,IAAI,EAAE,IAAIJ,GAAG,EAAE;KAChE,MAAM;MACHF,MAAM,GAAGD,KAAK,CAACQ,OAAO,GAAGR,KAAK,CAACQ,OAAO,GAAGR,KAAK,CAACS,QAAQ,EAAE;;IAE7DC,OAAO,CAACC,GAAG,CAACV,MAAM,CAAC;IACnB,OAAOb,UAAU,CAACa,MAAM,CAAC;EAC7B;EAEOW,MAAMA,CAAA;IACT,IAAIA,MAAM,GAAG,IAAIzB,WAAW,CAAC;MAAC,cAAc,EAAE;IAAkB,CAAC,CAAC;IAClE,IAAG,IAAI,CAACI,MAAM,CAACsB,eAAe,EAAE,EAC5BD,MAAM,GAAIA,MAAM,CAACE,MAAM,CAAC,eAAe,EAAE,UAAU,IAAI,CAACvB,MAAM,CAACwB,QAAQ,EAAE,EAAE,CAAC;IAChF,OAAO;MAACC,OAAO,EAAEJ;IAAM,CAAC;EAC5B;EAEOK,QAAQA,CAACC,IAAQ;IACpB,IAAI,CAAC3B,MAAM,CAAC0B,QAAQ,CAACC,IAAI,CAAC;EAC9B;EAEOC,SAASA,CAACnB,KAAqB;IAClC,IAAI,CAACT,MAAM,CAAC4B,SAAS,EAAE;IACvB,OAAO,IAAI,CAACpB,WAAW,CAACC,KAAK,CAAC;EAClC;;SA1CkBX,WAAW;;mBAAXA,MAAW,EAAA+B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA;AAAA;;SAAXlC,MAAW;EAAAmC,OAAA,EAAXnC,MAAW,CAAAoC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}